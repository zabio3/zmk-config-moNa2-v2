# moNa2 キーマップ設定

個人用にカスタマイズしたmoNa2のZMKファームウェア設定リポジトリです。

## 目次

- [moNa2について](#mona2について)
- [このリポジトリについて](#このリポジトリについて)
- [キーマップ](#キーマップ)
  - [Layer 0: デフォルト](#layer-0-デフォルト)
  - [Layer 1: 数字・記号](#layer-1-数字記号)
  - [Layer 3: ナビゲーション](#layer-3-ナビゲーション)
  - [Layer 4: Bluetooth・システム](#layer-4-bluetoothシステム)
- [コンボキー](#コンボキー)
- [エンコーダ機能](#エンコーダ機能)
- [トラックボール設定](#トラックボール設定)
- [ファームウェアのビルド方法](#ファームウェアのビルド方法)
- [参考リンク](#参考リンク)

## moNa2について

moNa2は[白湯_sayu](https://x.com/Pooh_pol0)氏が設計した分離型ワイヤレスキーボードです。

### 主な特徴

- **分離型設計**: 左右に分かれたエルゴノミクスレイアウト
- **右手トラックボール**: PMW3610センサー搭載
- **左手エンコーダ**: ロータリーエンコーダ対応
- **ワイヤレス接続**: Bluetooth 5.0（ZMKファームウェア）
- **マイコン**: Seeeduino XIAO BLE (nRF52840)

> 詳細は[moNa2紹介ページ](https://note.com/pooh_polo/n/ncfce62c909f5)をご参照ください。

## このリポジトリについて

本リポジトリは[sayu-hub/zmk-config-moNa2-v2](https://github.com/sayu-hub/zmk-config-moNa2-v2)をフォークした個人用キーマップ設定です。

### ファイル構成

```
config/
├── mona2.keymap      # キーマップ定義
├── mona2.json        # ZMK Studio用レイアウト
├── mona2_l.conf      # 左手側設定
├── mona2_r.conf      # 右手側設定
└── west.yml          # 依存モジュール定義
```

## キーマップ

### Layer 0: デフォルト

基本のQWERTY配列。右側にマウスボタン、ホールドタップでレイヤー切り替え。

```
左手                                         右手
┌─────┬─────┬─────┬─────┬─────┐               ┌─────┬─────┬─────┬─────┬─────┐
│  Q  │  W  │  E  │  R  │  T  │               │  Y  │  U  │  I  │  O  │  P  │
├─────┼─────┼─────┼─────┼─────┤         ┌─────┼─────┼─────┼─────┼─────┼─────┤
│  A  │  S  │  D  │  F  │  G  │         │  @  │  H  │  J  │  K  │  L  │  ;  │
├─────┼─────┼─────┼─────┼─────┼─────┐   ├─────┼─────┼─────┼─────┼─────┼─────┤
│Z/SFT│  X  │  C  │  V  │  B  │  ,  │   │  .  │  N  │  M  │ MB1 │ MB2 │ MB1 │
├─────┼─────┼─────┼─────┼─────┼─────┤   ├─────┼─────┼─────┴─────┴─────┼─────┤
│ ESC │SHIFT│ GUI │ BS  │ENTER│LANG2│   │LANG1│L1+SP│                 │ ALT │
└─────┴─────┴─────┴─────┴─────┴─────┘   └─────┴─────┴─────────────────┴─────┘
  ⟲ スクロール                                       ● トラックボール
```

**凡例:**
| 表記 | 説明 |
|------|------|
| Z/SFT | 長押しで左Shift、タップでZ |
| LANG2 | 長押しでLayer 2、タップでかな入力切替 |
| LANG1 | 長押しでLayer 0、タップで英数入力切替 |
| L1+SP | 長押しでLayer 1、タップでSpace |
| MB1/MB2 | 左クリック / 右クリック |
| GUI | Command (⌘) |
| BS | Backspace |

### Layer 1: 数字・記号

数字と各種記号。Layer 0でSpaceを長押しでアクセス。

```
左手                                         右手
┌─────┬─────┬─────┬─────┬─────┐               ┌─────┬─────┬─────┬─────┬─────┐
│  1  │  2  │  3  │  4  │  5  │               │  6  │  7  │  8  │  9  │  0  │
├─────┼─────┼─────┼─────┼─────┤         ┌─────┼─────┼─────┼─────┼─────┼─────┤
│  `  │  [  │  ]  │  (  │  )  │         │  ?  │CTRL │  &  │  *  │  -  │  _  │
├─────┼─────┼─────┼─────┼─────┼─────┐   ├─────┼─────┼─────┼─────┼─────┼─────┤
│  !  │  @  │  #  │  $  │  %  │  ~  │   │     │     │     │     │     │  \  │
├─────┼─────┼─────┼─────┼─────┼─────┤   ├─────┼─────┼─────┴─────┴─────┼─────┤
│     │     │     │     │     │     │   │     │     │                 │  |  │
└─────┴─────┴─────┴─────┴─────┴─────┘   └─────┴─────┴─────────────────┴─────┘
  ⟲ 音量調整
```

### Layer 3: ナビゲーション

矢印キー、ページ移動、Mac操作。ALT + MB1 の同時押し（コンボ）でアクセス。

```
左手                                         右手
┌─────┬─────┬─────┬─────┬─────┐               ┌─────┬─────┬─────┬─────┬─────┐
│ ESC │C+S+T│ S↑  │C+TAB│     │               │     │HOME │  ↑  │ END │     │
├─────┼─────┼─────┼─────┼─────┤         ┌─────┼─────┼─────┼─────┼─────┼─────┤
│ GUI │ S←  │ S↓  │ S→  │C+G+→│         │     │     │  ←  │  ↓  │  →  │     │
├─────┼─────┼─────┼─────┼─────┼─────┐   ├─────┼─────┼─────┼─────┼─────┼─────┤
│SHIFT│ ⌘+F │⌘+TAB│ ⌘+` │     │     │   │     │     │ DEL │PGUP │PGDN │     │
├─────┼─────┼─────┼─────┼─────┼─────┤   ├─────┼─────┼─────┴─────┴─────┼─────┤
│     │     │     │     │     │     │   │     │     │                 │     │
└─────┴─────┴─────┴─────┴─────┴─────┘   └─────┴─────┴─────────────────┴─────┘
  ⟲ 横スクロール                                     ● スクロールモード
```

**凡例:**
| 表記 | 説明 |
|------|------|
| C+S+T | Ctrl+Shift+Tab（前のタブ） |
| C+TAB | Ctrl+Tab（次のタブ） |
| C+G+→ | Ctrl+Cmd+→（デスクトップ切替） |
| S↑↓←→ | スクロール上下左右 |
| ⌘+F | Spotlight検索 |
| ⌘+TAB | アプリ切替 |
| ⌘+` | 同一アプリ内ウィンドウ切替 |
| PGUP/PGDN | Page Up / Page Down |

### Layer 4: Bluetooth・システム

Bluetoothプロファイル切替、ブートローダー、スクリーンショット。

```
左手                                         右手
┌─────┬─────┬─────┬─────┬─────┐               ┌─────┬─────┬─────┬─────┬─────┐
│     │⌘S+4 │⌘S+5 │⌘C+N │     │               │ BT0 │ BT1 │ BT2 │ BT3 │ BT4 │
├─────┼─────┼─────┼─────┼─────┤         ┌─────┼─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │         │     │     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┼─────┐   ├─────┼─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │     │   │BOOT │     │     │     │     │BTCLR│
├─────┼─────┼─────┼─────┼─────┼─────┤   ├─────┼─────┼─────┴─────┴─────┼─────┤
│     │     │     │     │     │     │   │     │     │                 │CLRAL│
└─────┴─────┴─────┴─────┴─────┴─────┘   └─────┴─────┴─────────────────┴─────┘
  ⟲ 輝度調整
```

**凡例:**
| 表記 | 説明 |
|------|------|
| ⌘S+4 | Cmd+Shift+4（スクリーンショット選択） |
| ⌘S+5 | Cmd+Shift+5（スクリーンショットメニュー） |
| ⌘C+N | Cmd+Ctrl+N（通知センター） |
| BT0-4 | Bluetoothプロファイル0〜4 |
| BOOT | ブートローダーモード |
| BTCLR | 現在のプロファイルのペアリング解除 |
| CLRAL | 全ペアリング解除 |

## コンボキー

2つのキーを同時押しすることで発動する特殊キー。

| 同時押しキー | 出力 | 位置 |
|-------------|------|------|
| A + S | TAB | 左手2段目 |
| S + D | Shift+TAB | 左手2段目 |
| I + O | " (ダブルクォート) | 右手1段目 |
| O + P | ' (シングルクォート) | 右手1段目 |
| U + I | - (マイナス) | 右手1段目 |
| I + O | = (イコール) | 右手1段目 |
| ALT + MB1 | ESC + Layer 3 | 右手親指 |

## エンコーダ機能

左手側のロータリーエンコーダはレイヤーごとに異なる機能を持ちます。

| レイヤー | 時計回り | 反時計回り |
|---------|---------|-----------|
| Layer 0 (Default) | スクロールダウン | スクロールアップ |
| Layer 1 (Numbers) | 音量アップ | 音量ダウン |
| Layer 3 (Navigation) | 横スクロール右 | 横スクロール左 |
| Layer 4 (Bluetooth) | 輝度アップ | 輝度ダウン |

## トラックボール設定

右手側にPMW3610センサーを使用したトラックボールを搭載。

- **CPI (感度)**: 600
- **センサー**: PMW3610
- **トラックボール**: [COROPIT](https://booth.pm/ja/items/6830658)を使用

### スクロールモード

Layer 3ではトラックボールがスクロールモードに切り替わります。

## ファームウェアのビルド方法

### GitHub Actionsによる自動ビルド

1. `config/mona2.keymap`を編集
2. コミット & プッシュ
3. GitHub Actionsが自動でビルド
4. Actionsタブからファームウェア（.uf2）をダウンロード

### ビルド成果物

- `mona2_l-seeeduino_xiao_ble-zmk.uf2` - 左手用
- `mona2_r-seeeduino_xiao_ble-zmk.uf2` - 右手用

### ファームウェアの書き込み

1. キーボードをUSB接続
2. リセットボタンを2回素早く押してブートローダーモードに入る
3. マウントされた`XIAO-SENSE`ドライブに.uf2ファイルをコピー
4. 自動で再起動して書き込み完了

## 参考リンク

### 公式リソース

- [moNa2紹介ページ](https://note.com/pooh_polo/n/ncfce62c909f5)
- [moNa2公式ファームウェア (sayu-hub)](https://github.com/sayu-hub/zmk-config-moNa2-v2)
- [ZMK Firmware公式ドキュメント](https://zmk.dev/docs)
- [moNaサポート・開発サーバー (Discord)](https://discord.gg/kJjDBDHGer)

### 使用ライブラリ

- [zmk-pmw3610-driver](https://github.com/badjeff/zmk-pmw3610-driver) - トラックボールドライバ
- [zmk-rgbled-widget](https://github.com/caksoylar/zmk-rgbled-widget) - RGB LED制御
- [zmk-input-processor-keybind](https://github.com/zettaface/zmk-input-processor-keybind) - 入力プロセッサ

### ツール

- [ZMK Studio](https://zmk.studio/) - リアルタイムキーマップ編集
- [Keymap Editor](https://nickcoutsos.github.io/keymap-editor/) - ビジュアルキーマップエディタ
